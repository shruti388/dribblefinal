import"./portfolio-new-930edc22.js";import{g as O}from"./request-8716ca80.js";import{I as b,t as D}from"./internal-tracking-53a35615.js";import{S as ct}from"./site-footer-d4d6d040.js";import{P as L,b as st,t as lt}from"./form-validation-287cbef7.js";import{s as _}from"./animation-7e2d11a2.js";import{D as ut}from"./drb-dialog-helpers-3b2a9ef1.js";import{i as T}from"./feature-gates-91956f5b.js";import{_ as ht}from"./preload-helper-b857222e.js";import{F as mt}from"./flickity-7e21c332.js";import{P as gt,a as ft}from"./photoswipe-fe6228ab.js";import{a as pt}from"./media-be04e287.js";import{P as bt}from"./project-cost-breakdown-b1fba35b.js";import{D as vt}from"./drb-confirm-helpers-15e164fa.js";import{c as yt}from"./check-verified-654e50fe.js";import{S as St}from"./site-nav-74ce7f06.js";/* empty css                           */import"./class-map-c7357fe1.js";import"./chunk.6CTB5ZDJ-8ae3ae4d.js";import"./js.cookie-4cba6d86.js";import"./expand-collapse-2e1b5c75.js";import"./_commonjsHelpers-de833af9.js";import"./debounce-323e2cb5.js";import"./axios-8f19e258.js";import"./axios_helper-2919371d.js";import"./url-c297b38c.js";import"./site-nav-autocomplete-7c5bda46.js";var F;F={config:{},run:function(){return this.getController().processElements()},process:function(...e){var t,r,a;for(r=0,a=e.length;r<a;r++)t=e[r],this.getController().processElement(t);return e.length},getController:function(){return this.controller!=null?this.controller:this.controller=new F.Controller}};var x,B,$,p,U,H,W,j,Y,v,Z,X,J,y,S,f,G,z,I,K,C,M,Q,w,E,h,tt,A,et,rt,k,at,it,q,P,c=F;c.config.useFormat24=!1,c.config.i18n={en:{date:{dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbrDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbrMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],yesterday:"yesterday",today:"today",tomorrow:"tomorrow",on:"on {date}",formats:{default:"%b %e, %Y",thisYear:"%b %e"}},time:{am:"am",pm:"pm",singular:"a {time}",singularAn:"an {time}",elapsed:"{time} ago",second:"second",seconds:"seconds",minute:"minute",minutes:"minutes",hour:"hour",hours:"hours",formats:{default:"%l:%M%P",default_24h:"%H:%M"}},datetime:{at:"{date} at {time}",formats:{default:"%B %e, %Y at %l:%M%P %Z",default_24h:"%B %e, %Y at %H:%M %Z"}}}},c.config.locale="en",c.config.defaultLocale="en",c.config.timerInterval=6e4,$=!isNaN(Date.parse("2011-01-01T12:00:00-05:00")),c.parseDate=function(e){return e=e.toString(),$||(e=B(e)),new Date(Date.parse(e))},x=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(Z|[-+]?[\d:]+)$/,B=function(e){var t,r,a,i,s,n,o,d,u,l;if(i=e.match(x))return[t,u,n,r,a,s,d,l]=i,l!=="Z"&&(o=l.replace(":","")),`${u}/${n}/${r} ${a}:${s}:${d} GMT${[o]}`},c.elementMatchesSelector=(p=document.documentElement,U=(H=(W=(j=(Y=p.matches)!=null?Y:p.matchesSelector)!=null?j:p.webkitMatchesSelector)!=null?W:p.mozMatchesSelector)!=null?H:p.msMatchesSelector,function(e,t){if((e!=null?e.nodeType:void 0)===Node.ELEMENT_NODE)return U.call(e,t)}),{config:v}=c,{i18n:X}=v,c.getI18nValue=function(e="",{locale:t}={locale:v.locale}){var r;return(r=Z(X[t],e))!=null?r:t!==v.defaultLocale?c.getI18nValue(e,{locale:v.defaultLocale}):void 0},c.translate=function(e,t={},r){var a,i,s;for(a in s=c.getI18nValue(e,r),t)i=t[a],s=s.replace(`{${a}}`,i);return s},Z=function(e,t){var r,a,i,s,n;for(n=e,r=0,i=(s=t.split(".")).length;r<i;r++){if(n[a=s[r]]==null)return null;n=n[a]}return n},{getI18nValue:y,translate:M}=c,C=typeof(typeof Intl<"u"&&Intl!==null?Intl.DateTimeFormat:void 0)=="function",S={"Central European Standard Time":"CET","Central European Summer Time":"CEST","China Standard Time":"CST","Israel Daylight Time":"IDT","Israel Standard Time":"IST","Moscow Standard Time":"MSK","Philippine Standard Time":"PHT","Singapore Standard Time":"SGT","Western Indonesia Time":"WIB"},c.knownEdgeCaseTimeZones=S,c.strftime=K=function(e,t){var r,a,i,s,n,o,d;return a=e.getDay(),r=e.getDate(),n=e.getMonth(),d=e.getFullYear(),i=e.getHours(),s=e.getMinutes(),o=e.getSeconds(),t.replace(/%(-?)([%aAbBcdeHIlmMpPSwyYZ])/g,function(u,l,g){switch(g){case"%":return"%";case"a":return y("date.abbrDayNames")[a];case"A":return y("date.dayNames")[a];case"b":return y("date.abbrMonthNames")[n];case"B":return y("date.monthNames")[n];case"c":return e.toString();case"d":return f(r,l);case"e":return r;case"H":return f(i,l);case"I":return f(K(e,"%l"),l);case"l":return i===0||i===12?12:(i+12)%12;case"m":return f(n+1,l);case"M":return f(s,l);case"p":return M("time."+(i>11?"pm":"am")).toUpperCase();case"P":return M("time."+(i>11?"pm":"am"));case"S":return f(o,l);case"w":return a;case"y":return f(d%100,l);case"Y":return d;case"Z":return G(e)}})},f=function(e,t){return t==="-"?e:`0${e}`.slice(-2)},G=function(e){var t,r,a;return(r=J(e))?S[r]:(a=I(e,{allowGMT:!1}))||(a=z(e))?a:(t=I(e,{allowGMT:!0}))?t:""},J=function(e){return Object.keys(S).find(function(t){return C?new Date(e).toLocaleString("en-US",{timeZoneName:"long"}).includes(t):e.toString().includes(t)})},I=function(e,{allowGMT:t}){var r;if(C&&(r=new Date(e).toLocaleString("en-US",{timeZoneName:"short"}).split(" ").pop(),t||!r.includes("GMT")))return r},z=function(e){var t,r,a,i,s;return(t=(r=(s=e.toString()).match(/\(([\w\s]+)\)$/))!=null?r[1]:void 0)?/\s/.test(t)?t.match(/\b(\w)/g).join(""):t:(t=(a=s.match(/(\w{3,4})\s\d{4}$/))!=null?a[1]:void 0)||(t=(i=s.match(/(UTC[\+\-]\d+)/))!=null?i[1]:void 0)?t:void 0},c.CalendarDate=class{static fromDate(e){return new this(e.getFullYear(),e.getMonth()+1,e.getDate())}static today(){return this.fromDate(new Date)}constructor(e,t,r){this.date=new Date(Date.UTC(e,t-1)),this.date.setUTCDate(r),this.year=this.date.getUTCFullYear(),this.month=this.date.getUTCMonth()+1,this.day=this.date.getUTCDate(),this.value=this.date.getTime()}equals(e){return(e!=null?e.value:void 0)===this.value}is(e){return this.equals(e)}isToday(){return this.is(this.constructor.today())}occursOnSameYearAs(e){return this.year===(e!=null?e.year:void 0)}occursThisYear(){return this.occursOnSameYearAs(this.constructor.today())}daysSince(e){if(e)return(this.date-e.date)/864e5}daysPassed(){return this.constructor.today().daysSince(this)}},{strftime:E,translate:h,getI18nValue:w,config:Q}=c,c.RelativeTime=class{constructor(e){this.date=e,this.calendarDate=c.CalendarDate.fromDate(this.date)}toString(){var e,t;return(t=this.toTimeElapsedString())?h("time.elapsed",{time:t}):(e=this.toWeekdayString())?(t=this.toTimeString(),h("datetime.at",{date:e,time:t})):h("date.on",{date:this.toDateString()})}toTimeOrDateString(){return this.calendarDate.isToday()?this.toTimeString():this.toDateString()}toTimeElapsedString(){var e,t,r,a,i;return r=new Date().getTime()-this.date.getTime(),a=Math.round(r/1e3),t=Math.round(a/60),e=Math.round(t/60),r<0?null:a<10?(i=h("time.second"),h("time.singular",{time:i})):a<45?`${a} ${h("time.seconds")}`:a<90?(i=h("time.minute"),h("time.singular",{time:i})):t<45?`${t} ${h("time.minutes")}`:t<90?(i=h("time.hour"),h("time.singularAn",{time:i})):e<24?`${e} ${h("time.hours")}`:""}toWeekdayString(){switch(this.calendarDate.daysPassed()){case 0:return h("date.today");case 1:return h("date.yesterday");case-1:return h("date.tomorrow");case 2:case 3:case 4:case 5:case 6:return E(this.date,"%A");default:return""}}toDateString(){var e;return e=this.calendarDate.occursThisYear()?w("date.formats.thisYear"):w("date.formats.default"),E(this.date,e)}toTimeString(){var e;return e=Q.useFormat24?"default_24h":"default",E(this.date,w(`time.formats.${e}`))}},{elementMatchesSelector:tt}=c,c.PageObserver=class{constructor(e,t){this.processMutations=this.processMutations.bind(this),this.processInsertion=this.processInsertion.bind(this),this.selector=e,this.callback=t}start(){if(!this.started)return this.observeWithMutationObserver()||this.observeWithMutationEvent(),this.started=!0}observeWithMutationObserver(){if(typeof MutationObserver<"u"&&MutationObserver!==null)return new MutationObserver(this.processMutations).observe(document.documentElement,{childList:!0,subtree:!0}),!0}observeWithMutationEvent(){return addEventListener("DOMNodeInserted",this.processInsertion,!1),!0}findSignificantElements(e){var t;return t=[],(e!=null?e.nodeType:void 0)===Node.ELEMENT_NODE&&(tt(e,this.selector)&&t.push(e),t.push(...e.querySelectorAll(this.selector))),t}processMutations(e){var t,r,a,i,s,n,o,d;for(t=[],r=0,i=e.length;r<i;r++)if((n=e[r]).type==="childList")for(a=0,s=(d=n.addedNodes).length;a<s;a++)o=d[a],t.push(...this.findSignificantElements(o));return this.notify(t)}processInsertion(e){var t;return t=this.findSignificantElements(e.target),this.notify(t)}notify(e){if(e!=null&&e.length)return typeof this.callback=="function"?this.callback(e):void 0}},{parseDate:rt,strftime:k,getI18nValue:et,config:A}=c,c.Controller=(function(){var e,t,r,a;return e="time[data-local]:not([data-localized])",t=function(i){return i.setAttribute("data-localized","")},r=function(i){return i.setAttribute("data-processed-at",new Date().toISOString())},a=function(i){return new c.RelativeTime(i)},class{constructor(){this.processElements=this.processElements.bind(this),this.pageObserver=new c.PageObserver(e,this.processElements)}start(){if(!this.started)return this.processElements(),this.startTimer(),this.pageObserver.start(),this.started=!0}startTimer(){var i;if(i=A.timerInterval)return this.timer!=null?this.timer:this.timer=setInterval(this.processElements,i)}processElements(i=document.querySelectorAll(e)){var s,n,o;for(n=0,o=i.length;n<o;n++)s=i[n],this.processElement(s);return i.length}processElement(i){var s,n,o,d,u,l;if(s=i.getAttribute("datetime"),o=i.getAttribute("data-local"),n=A.useFormat24&&i.getAttribute("data-format24")||i.getAttribute("data-format"),d=rt(s),!isNaN(d))return i.hasAttribute("title")||(l=A.useFormat24?"default_24h":"default",u=k(d,et(`datetime.formats.${l}`)),i.setAttribute("title",u)),r(i),i.textContent=function(){switch(o){case"time":return t(i),k(d,n);case"date":return t(i),a(d).toDateString();case"time-ago":return a(d).toString();case"time-or-date":return a(d).toTimeOrDateString();case"weekday":return a(d).toWeekdayString();case"weekday-or-date":return a(d).toWeekdayString()||a(d).toDateString()}}()}}}).call(window),P=!1,at=function(){return document.attachEvent?document.readyState==="complete":document.readyState!=="loading"},it=function(e){var t;return(t=typeof requestAnimationFrame=="function"?requestAnimationFrame(e):void 0)!=null?t:setTimeout(e,17)},q=function(){return c.getController().start()},c.start=function(){return P?c.run():(P=!0,typeof MutationObserver<"u"&&MutationObserver!==null||at()?q():it(q))},c.processing=function(){return c.getController().started},window.LocalTime===c&&c.start();const wt={open({id:e="",iconHtml:t="",title:r="",messageHtml:a="",variant:i="primary",onlyOnce:s=!1,duration:n}){const o=Object.assign(document.createElement("drb-toast"),{id:e,duration:n,title:r,variant:i,onlyOnce:s,innerHTML:`
        <div slot="icon">${t}</div>
        <div slot="message">${a}</div>
      `});document.body.append(o)}},Et=`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
  <path
    d="M7.5 12L10.5 15L16.5 9M22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12Z"
    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
</svg>`,At={init(){this.bindEvents()},bindEvents(){document.addEventListener("click",e=>{const t=e.target.closest("[data-resume-user-card] [data-bookmark]"),r=e.target.closest("[data-extra-skills-btn]");t&&this.bookmarkUser(t),r&&this.toggleExtraSkills(e),this.handleProfileRedirect(e)})},handleProfileRedirect(e){var i,s;const t=(i=e.target.closest("[data-profile-path]"))==null?void 0:i.getAttribute("data-profile-path"),r=(s=e.target.closest("[data-resume-user-card][data-id]"))==null?void 0:s.getAttribute("data-id"),a=!!e.target.closest("a, input, button, label, drb-tooltip");!t||!r||a||(b.trackSearchProfileClicked(r,e.target),D("ProfileClicked",{userID:r}),window.open(t,"_blank").focus())},toggleExtraSkills(e){const t=e.target.closest("[data-resume-user-card-footer]"),r=t==null?void 0:t.querySelectorAll("[data-skills-item]"),a=e.target.closest("[data-extra-skills-btn]"),i=a==null?void 0:a.querySelector("[data-extra-skills-text-count]"),s=a==null?void 0:a.querySelector("[data-skills-text-hide]");r.forEach(n=>{n.classList.toggle("display-flex")}),i==null||i.classList.toggle("display-none"),s==null||s.classList.toggle("display-none")},async bookmarkUser(e){var l,g,R;if(!(((R=(g=(l=window.Dribbble)==null?void 0:l.JsConfig)==null?void 0:g.user)==null?void 0:R.isLoggedIn)||!1))return this.openDesignerSearchUpsellModal();const r=e.closest("[data-resume-user-card]"),a=r==null?void 0:r.getAttribute("data-username"),i=r==null?void 0:r.getAttribute("data-display-name"),s=r==null?void 0:r.getAttribute("data-saved-search-id");if(!a)return;const n=!e.hasAttribute("data-bookmarked"),o=s?`/client_app/talent/saved_searches/${s}/bookmarks/${a}`:`/client_app/talent/bookmarks/${a}`,u={path:n?"/client_app/talent/bookmarks":o,method:n?"POST":"DELETE",body:JSON.stringify({userId:a})};try{e.classList.add("btn2--loading");const{path:N,method:ot,body:dt}=u;if(!(await fetch(N,{method:ot,body:dt,headers:{"Content-Type":"application/json","X-CSRF-Token":O(),"X-Requested-With":"XMLHttpRequest"}})).ok)throw new Error("Something went wrong");e.toggleAttribute("data-bookmarked",n),e.classList.toggle("btn2--icon-expand-animation",n),n&&(wt.open({title:"Designer Saved",messageHtml:`<span>${i||a} was saved to your <a href="/designers/bookmarks">Saved Designers</a></span>`,iconHtml:Et,variant:"success",duration:5e3}),b.trackSearchDesignerBookmarked(r.getAttribute("data-id"),r))}catch{Dribbble.EventBus.$emit("siteNotifications:add",{title:"Error updating bookmark",id:"update-bookmark"})}finally{e.classList.remove("btn2--loading")}},openDesignerSearchUpsellModal(){const e=document.querySelector("drb-dialog#designer-search-upsell-modal");e&&e.open()}};At.init();document.addEventListener("submit",e=>{if(e.target.closest("form[data-on-submit-update-dom]")){const t=e.target,r=document.querySelector(t.dataset.onSubmitUpdateDom);if(r){e.preventDefault();const a=new FormData(t);fetch(t.action,{method:a.get("_method")||t.method,body:a,headers:{"X-Requested-With":"XMLHttpRequest"}}).then(i=>i.text()).then(i=>{r.outerHTML=i}).catch(i=>{var s;return(s=Dribbble==null?void 0:Dribbble.Notify)==null?void 0:s.error(i)})}}});class Tt{constructor(t,r){if(!t)throw new Error("Form not found for form handler");this.options={submitBtnSelector:"[data-submit]",formErrorSelector:"[data-form-error]",defaultServerErrorMsg:"Something went wrong",arrayFields:[],scrollToError:!0,shakeOnError:!0,onSuccess:a=>{},onError:(a,i)=>{},onBeforeSubmit:a=>{},onSubmitStart:a=>{},onSubmitEnd:a=>{},transformData:(a,i)=>{},...r},this.form=t,this.pristineValidation=L(this.form),this.bindListeners()}bindListeners(){this.form.addEventListener("submit",t=>{t.preventDefault(),this.submitForm()})}async submitForm(){var i;if(this.form.hasAttribute("is-submitting"))return;const t=this.getPayloadData();if(!((i=this.pristineValidation)!=null&&i.validate())){if(this.options.shakeOnError&&this.shakeSubmitButton(),this.options.scrollToError){const s=this.form.querySelector(".has-validation-error");s==null||s.scrollIntoView({behavior:"smooth",block:"nearest"})}return}if(this.options.onBeforeSubmit&&this.options.onBeforeSubmit(t)===!1)return;const r=s=>{var o,d,u,l;const n=this.form.querySelector(this.options.submitBtnSelector);this.form.toggleAttribute("is-submitting",s),n&&(n.disabled=s,n.classList.toggle("btn2--loading",s)),s?(d=(o=this.options).onSubmitStart)==null||d.call(o,t):(l=(u=this.options).onSubmitEnd)==null||l.call(u,t)};r(!0),this.setErrorMessage(null);let a;try{if(a=await fetch(this.form.getAttribute("action"),{method:this.form.getAttribute("method")||"POST",body:JSON.stringify(t),headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json","X-CSRF-Token":O()}}),a.status<200||a.status>=400){const s=await a.text(),n=a.status===422?s:this.options.defaultServerErrorMsg;throw new Error(n||this.options.defaultServerErrorMsg)}this.options.onSuccess(a)}catch(s){const n=s instanceof Error?s.message:this.options.defaultServerErrorMsg;this.setErrorMessage(n),console.error(n,s),this.options.onError(a,n)}finally{r(!1)}}shakeSubmitButton(){const t=this.form.querySelector(this.options.submitBtnSelector);_(t)}setErrorMessage(t){const r=this.form.querySelector(this.options.formErrorSelector);r&&(r.toggleAttribute("hidden",!t),r.innerText=t)}getPayloadData(){const t=new FormData(this.form),r={};for(const i of t.keys()){const s=t.getAll(i).filter(n=>n!=="");s.length!==0&&(r[i]=this.options.arrayFields.includes(i)?s:s[0])}return this.options.transformData(r,t)||r}}const nt={init(){this.bindListeners()},bindListeners(){document.addEventListener("click",e=>{var s,n,o;const t=(s=e.target.closest("[data-screen-transition]"))==null?void 0:s.getAttribute("data-screen-transition");if(!t)return;const r=(n=e.target.closest("[data-screen]"))==null?void 0:n.parentElement,a=(o=e.target.closest("[data-screen-transition-type]"))==null?void 0:o.getAttribute("data-screen-transition-type"),i=r==null?void 0:r.querySelector(`[data-screen="${t}"]`);this.transitionToScreen({targetScreen:i,type:a})})},async transitionToScreen({targetScreen:e,type:t="slide-left"}){var i;const r=e==null?void 0:e.parentElement.querySelector("[data-screen]:not([hidden])");if(!r||!e){console.error("Current screen or target screen not found for transition",e);return}const a=()=>{r.toggleAttribute("hidden",!0),e.toggleAttribute("hidden",!1)};if(!document.startViewTransition){a();return}r.style.viewTransitionName="screen-old",e.style.viewTransitionName="screen-new",await((i=document.startViewTransition({update:a,types:[t]}))==null?void 0:i.finished),r.style.viewTransitionName="none",e.style.viewTransitionName="none"}};class V{constructor(t,r={}){if(this.screen=t,this.screenContext=t==null?void 0:t.parentElement,this.form=t==null?void 0:t.querySelector("form[data-auth-form]"),!this.screen)throw new Error("Screen not found");this.form&&(this.formHandler=new Tt(this.form,{onSuccess:this.handleSuccessResponse.bind(this),...r}))}async handleSuccessResponse(t){if(t.status===202){const{redirect_to:r}=await t.json();if(!r)return;window.location.href=r}else{const r=await t.text();this.injectAndTransitionToScreen(r)}}injectAndTransitionToScreen(t){if(!t)return;new DOMParser().parseFromString(t,"text/html").querySelectorAll("[data-screen]").forEach((s,n)=>{const o=s.getAttribute("data-screen"),d=this.screenContext.querySelector(`[data-screen="${o}"]`);d?d.replaceWith(s):this.screenContext.appendChild(s);const u=this.screenContext.querySelector(`[data-screen="${o}"]`);u.dispatchEvent(new Event("auth-screen-injected",{bubbles:!0,cancelable:!0})),n===0&&nt.transitionToScreen({targetScreen:u})})}}class Dt extends V{constructor(t){const r={defaultServerErrorMsg:"Incorrect passcode",onSubmitStart:()=>{this.codeInput.disabled=!0},onError:()=>{_(this.codeInput),this.codeInput.disabled=!1,setTimeout(()=>{this.codeInput.focus()},0)}};if(super(t,r),this.codeInput=t.querySelector("[data-passcode-input]"),!this.codeInput)throw new Error("Code input not found for passcode auth screen");this.bindListeners()}bindListeners(){this.screen.addEventListener("drb-code-input:complete",()=>{this.form.requestSubmit()})}}class Lt extends V{constructor(t){const r={onBeforeSubmit:()=>{const a=this.getAvatarUploadElement(),i=!a||(a==null?void 0:a.status)==="COMPLETE";return i||(this.formHandler.setErrorMessage("Please wait for the avatar upload to complete."),this.formHandler.shakeSubmitButton()),i},transformData:a=>{const i=this.getAvatarUploadElement();return i&&(a.avatar=i.s3FileDetailsId),a}};if(super(t,r),this.avatarFileInput=t.querySelector("[data-auth-avatar-file-input]"),this.avatarImageContainer=t.querySelector("[data-auth-avatar-image-container]"),this.avatarError=t.querySelector("[data-avatar-error]"),!this.avatarFileInput||!this.avatarImageContainer||!this.avatarError)throw new Error("Avatar file input, error, or image container not found");this.bindListeners()}bindListeners(){this.screen.addEventListener("click",t=>{t.target.closest("[data-auth-avatar-upload]")&&this.avatarFileInput.click()}),this.avatarFileInput.addEventListener("change",t=>{var r;this.processAvatarFile((r=t.target.files)==null?void 0:r[0]),this.avatarFileInput.value=""})}getAvatarValidationError(t,r){return["image/jpeg","image/jpg","image/png","image/gif"].includes(t.type)?t.size>4*1024*1024?"File size exceeds the limit of 4 MB.":r.width<300||r.height<300?"Minimum size is 300x300 pixels.":null:"Invalid file type. Only JPEG, PNG, and GIF are allowed."}setAvatarError(t){this.avatarError&&(this.avatarError.innerText=t,this.avatarError.toggleAttribute("hidden",!t))}async processAvatarFile(t){if(t)try{const r=new Image;r.src=URL.createObjectURL(t),await r.decode();const a=this.getAvatarValidationError(t,r);if(this.setAvatarError(a),a)return;const i=document.createElement("drb-s3-upload"),s=document.createElement("img");i.file=t,i.s3Kind="avatar",i.hideCancel=!0,s.src=r.src;const n=this.getAvatarUploadElement();n&&n.cancelUpload(),i.appendChild(s),this.avatarImageContainer.prepend(i)}catch{this.setAvatarError("Failed to load image")}}getAvatarUploadElement(){return this.avatarImageContainer.querySelector("drb-s3-upload")}}const It={"auth-passcode":Dt,"auth-profile":Lt},Ct={init(){document.querySelectorAll("[data-auth-page-container] [data-screen]").forEach(t=>this.initScreen(t)),this.bindListeners()},bindListeners(){document.addEventListener("drb-dialog-content-updated",e=>{const t=e.target.closest("drb-dialog#auth-flow");if(!t)return;t.querySelectorAll("[data-screen]").forEach(a=>this.initScreen(a))}),document.addEventListener("click",e=>{const t=e.target.closest("[data-auth-trigger]"),r=t==null?void 0:t.getAttribute("data-auth-context");if(!t)return;e.preventDefault();const a=new URL("/new_signups/new",window.location.origin);a.searchParams.set("context",r),a.searchParams.set("redirect_url",window.location.href),ut.openRemote({url:a,dialogId:"auth-flow"})}),document.addEventListener("auth-screen-injected",e=>{this.initScreen(e.target)})},initScreen(e){const t=e==null?void 0:e.getAttribute("data-screen");if(!t)return;const r=It[t]||V;new r(e)}},Mt={bindListeners(){this.bindMessageInputSync(),this.bindTabNavigation(),this.bindFormValidation(),this.bindTrackingListeners(),T("disintermediation")||(this.bindContactInfoResetLegacy(),this.bindSendAnywayBtnLegacy())},bindTabNavigation(){document.addEventListener("click",e=>{const t=e.target.closest("[data-message-dialog-tab]");t&&document.querySelectorAll("[data-message-dialog-tab]").forEach(r=>{r.classList.toggle("active",r===t)})})},bindMessageInputSync(){document.addEventListener("input",e=>{const t=e.target.closest("drb-dialog#message-dialog");if(!t)return;const r=t.querySelectorAll("#message-dialog-message, #message-dialog-details");Array.from(r).includes(e.target)&&r.forEach(a=>{a.value=e.target.value})})},bindFormValidation(){document.addEventListener("drb-dialog-content-updated",e=>{const t=e.target.closest("drb-dialog#message-dialog");t&&t.querySelectorAll("[data-message-dialog-form]").forEach(r=>{r.pristineValidation=L(r),T("disintermediation")&&st(r)})}),document.addEventListener("submit",e=>{var r;const t=e.target.closest("[data-message-dialog-form]");if(t){if(e.preventDefault(),!T("disintermediation")){const a=this.checkForContactInfoLegacy(e);if(a){this.handleContactInfoDetectedLegacy(a);return}}!t.hasAttribute("is-submitting")&&((r=t.pristineValidation)!=null&&r.validate())&&this.submitForm(t)}})},bindTrackingListeners(){document.addEventListener("drb-dialog-content-updated",e=>{var i;const t=e.target.closest("drb-dialog#message-dialog");if(!t)return;const r=t.querySelector("[data-message-dialog-form]"),a=(i=r==null?void 0:r.querySelector("input[name='engagement[recipient_id]']"))==null?void 0:i.value;a&&(b.trackSearchMessageModalDisplayed(a,t),D("MessageModalDisplayed",{userId:a}))})},bindContactInfoResetLegacy(){document.addEventListener("input",e=>{if(!e.target.closest("drb-dialog#message-dialog"))return;const r=this.checkForContactInfoLegacy(e);r||this.handleContactInfoDetectedLegacy(r)})},async submitForm(e){var n;const t="Failed to send message",r=e.querySelector("[data-message-dialog-submit]"),a=e.querySelector("[data-form-error]"),i=o=>{e.toggleAttribute("is-submitting",o),r.disabled=o,r.classList.toggle("btn2--loading",o)},s=o=>{a&&(a.toggleAttribute("hidden",!o),a.innerText=o)};i(!0),s(null);try{const o=await fetch(e.getAttribute("action"),{method:"POST",body:this.getTransformedFormData(e),headers:{"X-Requested-With":"XMLHttpRequest"}}),d=await o.text();if(!o.ok){const g=o.status===422?d:t;throw new Error(g||t)}const u=(n=e.querySelector("[data-recipient-id-input]"))==null?void 0:n.value;u&&b.trackSearchUserMessaged(u),D("UserMessaged",{recipientId:u});const l=e.closest("drb-dialog");l==null||l.setContent(d)}catch(o){const d=o instanceof Error?o.message:t;s(d),console.error(d,o)}finally{i(!1)}},getTransformedFormData(e){const t=new FormData(e);switch(e.getAttribute("data-message-dialog-form")){case"workRequest":t.set("engagement[budget_cents]",parseInt(t.get("budget_dollars")||0,10)*100),t.delete("budget_dollars");break}return t},bindSendAnywayBtnLegacy(){document.addEventListener("click",e=>{const t=e.target.closest("drb-dialog#message-dialog");if(!t||!e.target.closest("[data-contact-info-warning-send-btn]"))return;const a=t.querySelector("[data-message-dialog-form]");this.handleContactInfoDetectedLegacy(!1),this.submitForm(a)})},getContactInfoRegexesLegacy(){const e=document.querySelector('[data-message-dialog-form="workRequest"]'),t=e==null?void 0:e.getAttribute("data-contact-info-regexes");if(t)return JSON.parse(t).map(r=>new RegExp(r,"i"))},checkForContactInfoLegacy(e){const t=e.target.closest('[data-message-dialog-form="workRequest"]');if(!t)return;const r=t.querySelector("#message-dialog-details");return this.getContactInfoRegexesLegacy().some(s=>s.test(r.value))},handleContactInfoDetectedLegacy(e){const t=document.querySelector('[data-message-dialog-form="workRequest"]'),r=t==null?void 0:t.querySelector("[data-contact-info-warning]");if(!r)return;const a=t.querySelector("[data-message-dialog-submit]");lt(r,e),e&&_(a)}};function m(e){var t;return((t=e==null?void 0:e.data)==null?void 0:t.type)==="drb-video"}class kt{constructor(t,r){this.options=r,this.initLightboxEvents(t),t.on("init",()=>{this.initPswpEvents(t.pswp)})}initLightboxEvents(t){t.on("contentLoad",this.onContentLoad.bind(this)),t.on("contentDestroy",this.onContentDestroy.bind(this)),t.on("contentActivate",this.onContentActivate.bind(this)),t.on("contentDeactivate",this.onContentDeactivate.bind(this)),t.on("contentAppend",this.onContentAppend.bind(this)),t.on("contentResize",this.onContentResize.bind(this)),t.addFilter("isKeepingPlaceholder",this.isKeepingPlaceholder.bind(this)),t.addFilter("isContentZoomable",this.isContentZoomable.bind(this)),t.addFilter("useContentPlaceholder",this.useContentPlaceholder.bind(this)),t.addFilter("domItemData",(r,a,i)=>(r.type==="video"&&i&&(i.dataset.pswpVideoSources?r.videoSources=JSON.parse(i.dataset.pswpVideoSources):i.dataset.pswpVideoSrc?r.videoSrc=i.dataset.pswpVideoSrc:r.videoSrc=i.href),r))}initPswpEvents(t){t.on("pointerDown",r=>{const a=t.currSlide;if(m(a)&&this.options.preventDragOffset){const i=r.originalEvent;if(i.type==="pointerdown"){const n=Math.ceil(a.height*a.currZoomLevel)+a.bounds.center.y,o=i.pageY-t.offset.y;o>n-this.options.preventDragOffset&&o<n&&r.preventDefault()}}}),t.on("appendHeavy",r=>{m(r.slide)&&!r.slide.isActive&&r.preventDefault()}),t.on("close",()=>{m(t.currSlide.content)&&((!t.options.showHideAnimationType||t.options.showHideAnimationType==="zoom")&&(t.options.showHideAnimationType="fade"),this.pauseVideo(t.currSlide.content))})}onContentDestroy({content:t}){m(t)&&t._videoPosterImg&&(t._videoPosterImg.onload=null,t._videoPosterImg.onerror=null,t._videoPosterImg=null)}onContentResize(t){if(m(t.content)){t.preventDefault();const{width:r,height:a,content:i}=t;if(i.element&&(i.element.style.width=`${r}px`,i.element.style.height=`${a}px`),i.slide&&i.slide.placeholder){const s=i.slide.placeholder.element.style;s.transform="none",s.width=`${r}px`,s.height=`${a}px`,s.borderRadius="8px"}}}isKeepingPlaceholder(t,r){return m(r)?!1:t}isContentZoomable(t,r){return m(r)?!1:t}onContentActivate({content:t}){m(t)&&this.options.autoplay&&this.playVideo(t)}onContentDeactivate({content:t}){m(t)&&this.pauseVideo(t)}onContentAppend(t){m(t.content)&&(t.preventDefault(),t.content.isAttached=!0,t.content.appendImage())}onContentLoad(t){const{content:r}=t;if(m(t.content)&&(t.preventDefault(),!r.element)){if(r.state="loading",r.type="drb-video",r.element=document.createElement("drb-video"),r.videoElement=document.createElement("video"),r.element.appendChild(r.videoElement),this.options.videoAttributes)for(const a in this.options.videoAttributes)r.videoElement.setAttribute(a,this.options.videoAttributes[a]||"");r.videoElement.setAttribute("poster",r.data.msrc),this.preloadVideoPoster(r,r.data.msrc),r.element.style.position="absolute",r.element.style.left=0,r.element.style.top=0,r.data.videoSources?r.data.videoSources.forEach(a=>{const i=document.createElement("source");i.src=a.src,i.type=a.type,r.videoElement.appendChild(i)}):r.data.videoSrc&&(r.videoElement.src=r.data.videoSrc)}}preloadVideoPoster(t,r){if(!t._videoPosterImg&&r)if(t._videoPosterImg=new Image,t._videoPosterImg.src=r,t._videoPosterImg.complete)t.onLoaded();else{const a=()=>{t.onLoaded()};t._videoPosterImg.onload=a,t._videoPosterImg.onerror=a}}playVideo(t){setTimeout(()=>{var r;(r=t.videoElement)==null||r.play()},0)}pauseVideo(t){var r;(r=t.videoElement)==null||r.pause()}useContentPlaceholder(t,r){return m(r)?!0:t}}const qt={videoAttributes:{playsinline:"",preload:"auto",loop:""},autoplay:!0,preventDragOffset:80};class Pt{constructor(t,r){new kt(t,{...qt,...r})}}const Ft={init(){document.addEventListener("drb-dialog-content-updated",t=>{const r=t.target.closest("drb-dialog#service-view-dialog");r&&(this.initFlickity(r),this.bindThumbnails(r),this.initLightbox(r),this.bindCTAButtons(r),this.bindSelectPaymentMethod(r),this.bindDialogValidation(r))}),document.addEventListener("drb-dialog-closed",t=>{const r=t.target.closest("drb-dialog#service-view-dialog");r&&r.querySelectorAll("video").forEach(a=>{a.pause()})});const e=document.querySelector("[data-service-view-page]");e&&(this.initFlickity(e),this.bindThumbnails(e),this.initLightbox(e),this.bindCTAButtons(e),this.bindSelectPaymentMethod(e),this.bindDialogValidation(e)),bt.init()},playPauseCarouselVideos(e){var a,i,s,n;const t=(i=(a=e.flkty)==null?void 0:a.selectedElement)==null?void 0:i.querySelector("video"),r=(n=(s=e.lightbox)==null?void 0:s.pswp)==null?void 0:n.isOpen;e.querySelectorAll("video").forEach(o=>{o===t&&!r?o.play():o.pause()})},initFlickity(e){const t=e.querySelector("[data-service-view-carousel]");if(!t)return;const r=e.querySelectorAll("[data-service-view-gallery-thumbnail]").length>1,a=matchMedia("(hover: none)").matches;e.flkty&&e.flkty.destroy(),e.flkty=new mt(t,{wrapAround:!0,contain:!0,prevNextButtons:r,pageDots:!1,draggable:r&&a}),e.flkty.on("change",i=>{e.querySelectorAll("[data-service-view-gallery-button]").forEach((s,n)=>{s.toggleAttribute("data-current",i===n)}),this.playPauseCarouselVideos(e)}),e.flkty.on("staticClick",(i,s,n,o)=>{var d;i.target.tagName!=="DRB-VIDEO"&&((d=e.lightbox)==null||d.loadAndOpen(o))}),setTimeout(()=>{t.toggleAttribute("data-carousel-initialized",!0)},0)},bindThumbnails(e){e.querySelectorAll("[data-service-view-gallery-button]").forEach((t,r)=>{t.addEventListener("click",()=>{var a;(a=e.flkty)==null||a.selectCell(r)})})},initLightbox(e){e.lightbox&&e.lightbox.destroy();const t=e.querySelector('[slot="dialog-outer"]')||document.body;e.lightbox=new gt({secondaryZoomLevel:"fill",doubleTapAction:!1,arrowPrev:!1,arrowNext:!1,appendToEl:t,dataSource:[],...ft,pswpModule:()=>ht(()=>import("./photoswipe.esm-3ee328cd.js"),[])}),e.lightbox.addFilter("thumbEl",(r,a,i)=>e.querySelectorAll("[data-lightbox-trigger]")[i]||r),e.lightbox.on("change",()=>{var a;const{currIndex:r}=e.lightbox.pswp;(a=e.flkty)==null||a.selectCell(r)}),e.lightbox.on("openingAnimationStart",()=>{this.playPauseCarouselVideos(e)}),e.lightbox.on("destroy",()=>{setTimeout(()=>{this.playPauseCarouselVideos(e)},0)}),new Pt(e.lightbox),e.lightbox.init(),e.querySelectorAll("[data-lightbox-trigger]").forEach(r=>{var i,s;const a=this.getPhotoswipeData(r);a&&((s=(i=e.lightbox.options)==null?void 0:i.dataSource)==null||s.push(a))})},getPhotoswipeData(e){const t=parseInt(e.getAttribute("data-media-width")||400,10),r=parseInt(e.getAttribute("data-media-height")||300,10),a=e.getAttribute("data-media-type"),i=e.getAttribute("data-lightbox-url"),s=e.getAttribute("data-preview-url"),n=e.getAttribute("data-file-name"),o=!!s&&!!i&&!!r&&!!t,d=n.endsWith(".gif");if(!o)return null;if(a==="video")return{videoSrc:i,type:"drb-video",msrc:s,width:t,height:r,thumbCropped:!0};const u=[t,640,850,1024,1600,1905,2400,3810].filter(g=>g<=t);return{srcset:d?null:pt({mediaUrl:i,aspectRatio:t/r,widths:u}),src:i,msrc:s,width:t,height:r,thumbCropped:!0}},bindCTAButtons(e){const t=e==null?void 0:e.querySelectorAll("[data-service-view-toggle-panel]"),r=e==null?void 0:e.querySelectorAll("[data-service-view-panel]");t.forEach(a=>{a.addEventListener("click",()=>{r.forEach(i=>{i.toggleAttribute("hidden")})})})},bindSelectPaymentMethod(e){const t=e==null?void 0:e.querySelector("[data-project-breakdown-payment-method-select]");t==null||t.addEventListener("change",()=>{this.updateSelectedPaymentMethod(e,t.value)})},updateSelectedPaymentMethod(e,t){const r=e==null?void 0:e.querySelector("[data-project-breakdown-filter-payment-method]");this.updateCheckoutUrl(e,t),r==null||r.setAttribute("data-project-breakdown-filter-payment-method",t)},updateCheckoutUrl(e,t){const r=e.querySelector("[data-checkout-button]");if(!r)return;const a=r.getAttribute("href")||"",i=new URL(a,window.location.origin);i.searchParams.set("payment_method_type",t),r.setAttribute("href",i.toString())},bindDialogValidation(e){const t=e.querySelector("[data-checkout-button]");e.pristineValidation=L(e),t==null||t.addEventListener("click",r=>{e.pristineValidation.validate()||r.preventDefault()})}},Ot={init(){this.bindListeners()},bindListeners(){document.addEventListener("drb-dialog-content-updated",e=>{const t=e.target,r=t.querySelector("[data-service-request-form]"),a=r==null?void 0:r.getAttribute("data-recipient-id");!r||!a||(b.trackSearchMessageModalDisplayed(a,t),D("MessageModalDisplayed",{recipientId:a}),this.bindFormValidation(r))})},bindFormValidation(e){e.pristineValidation=L(e),T("disintermediation")&&st(e),e.addEventListener("submit",t=>{t.preventDefault(),this.submitForm(e)})},async submitForm(e){var n;if(e.hasAttribute("is-submitting")||!((n=e.pristineValidation)!=null&&n.validate()))return;const t="Failed to send message",r=e.querySelector("[data-service-request-submit]"),a=e.querySelector("[data-form-error]"),i=o=>{e.toggleAttribute("is-submitting",o),r.disabled=o,r.classList.toggle("btn2--loading",o)},s=o=>{a&&(a.toggleAttribute("hidden",!o),a.innerText=o)};i(!0),s(null);try{const o=await fetch(e.getAttribute("action"),{method:"POST",body:new FormData(e),headers:{"X-Requested-With":"XMLHttpRequest","X-CSRF-Token":O()}});if(!o.ok){const l=await o.text(),g=o.status===422?l:t;throw new Error(g||t)}const d=e.getAttribute("data-recipient-id");d&&b.trackSearchUserMessaged(d);const u=await o.json();e.closest("drb-dialog").close(),vt.open({title:"Your request was sent!",message:"",iconHtml:yt,centered:!0,cancelText:"",confirmText:"View Request",confirmHref:u.redirect_url,confirmClass:"btn2--primary btn2--full-width"})}catch(o){const d=o instanceof Error?o.message:t;s(d),console.error(d,o),i(!1)}}};Ct.init();nt.init();St.init();Ft.init();Ot.init();Mt.bindListeners();ct.init();c.start();
//# sourceMappingURL=application-a5ed3b30.js.map
